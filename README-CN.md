# regex-compiler

[中文版](README-CN.md) [English](README.md)

这个repo包含本人毕设主要的code，项目是关于正则匹配引擎加速的。

src下有纯手工打造的parser，compiler，matcher工具链，将会不断扩充语法功能支持（截至2018.12.15，只支持最基本的操作'|','.','*',字符表char，（unicode可以通过按8bit顺序读来支持））。本regex只支持到标准的正则语言范围，实际上现代正则匹配引擎已经支持很多CFG甚至超出CFG的语法，因此严格上讲，现代regex（如perl，pcre，re2等）不是标准的正则语言，regular language是他们支持的语言的一个真子集，详细的相关自动机理论/计算语言理论请参考有关教科书。

为什么不支持那些非标准的语法呢？这里我认为有必要先做出声明：
    1. 只要一个语法是符合标准正则语言的规则或者通过转换等手段能够证明是和标准正则语言等价的语法，本repo的regex版本是支持的，只是目前的支持还不全面，
        在下一步，我会专门造一套工具完善支持的语法。
    2. 如果一个语法本质上是非正则的，比如back-reference，那么未来我既不会也不可能支持到这些语法。
        原因是，这个项目的一个重要的目的是探索在GPU或者是其他ASIC平台上加速匹配算法的可能以及极限，这些非正则的语法从本质上讲要想支持
        必须改动匹配算法，采用类似dfs的方式支持，那么很难做到高效并行化/cache友好。同时，一个很强大的regex库：hyperscan，也是不支持
        这一类非正则的语法的。当然，这也不是说这个项目未来没有可能进一步支持非正则的语法，只是可能从matcher这一步要开始重新造（甚至parser
        的AST也要重新搞一套），这个feature我不太care，可以留作future work，或者读者有兴趣可以自己造，欢迎交流😝

算法以及实现的细节请见doc/

另一个和本项目相关的项目是multi-pattern-match引擎，在实践中，string-match可以有效的减轻regex-engine的负担，当然不一定是string-match，
任何可以达到高效滤除功能的filter都能极大的改善regex-engine的负载。从解耦工程复杂性的角度，本repo只专注于提升regex-engine的性能。